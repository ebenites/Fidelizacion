@model Fidelizacion.Models.FichaAfiliacionViewModel


@section scripts {

    <script type="text/javascript">

        
    $(function () {
      
     

       
       

      
     

    });

  

    </script>
}

@{
    ViewBag.Title = "Ver Afiliado";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .required-field:after {
        color: #d00;
        content: "";
        position: absolute;
        margin-left: 3px;
        top: 10px;
    }
</style>

<h2>Ver Afiliado</h2>
<br />

@using (Html.BeginForm("Create", "FichaAfiliacion", FormMethod.Post, new { id = "formularioCrear" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Datos Personales</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.ValidationMessage("ERROR_MESSAGE", "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.fk_tipo_documento, htmlAttributes: new { @class = "control-label required-field col-md-2" })

            <div class="col-md-4">
               

                @Html.DropDownListFor(model => model.fk_tipo_documento, new SelectList(
                  new List<Object>{

                       new { value = "1" , text = "DNI" },
                       new { value = "2" , text = "Carnet Extrangería"}
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })

                


            </div>
            
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.numero_documento, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.numero_documento, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.nombre, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.nombre, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>
        </div>


        <div class="form-group">
            @*Html.LabelFor(model => model.apellidos, htmlAttributes: new { @class = "control-label col-md-2" })*@
            <label class="control-label required-field col-md-2" for="apellidos">Apellidos</label>
            <div class="col-md-4">
                @Html.EditorFor(model => model.apellidos, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>
        </div>

               <div class="form-group">
            @Html.LabelFor(model => model.fecha_nacimiento, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.fecha_nacimiento, new { htmlAttributes = new { @type = "date", @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.sexo, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.DropDownListFor(model => model.sexo, new SelectList(
                  new List<Object>{

                       new { value = "M" , text = "Masculino" },
                       new { value = "F" , text = "Femenino"}
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })
                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.estado_civil, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.DropDownListFor(model => model.estado_civil, new SelectList(
                  new List<Object>{

                       new { value = "S" , text = "Soltero" },
                       new { value = "C" , text = "Casado"},
                       new { value = "V" , text = "Viudo"},
                       new { value = "D" , text = "Divorciado"}
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })

                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.correo, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.correo, new { htmlAttributes = new { @type = "email", @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.numero_telefono, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.numero_telefono, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.celular, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.celular, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>



        <div class="form-group">
            @Html.LabelFor(model => model.direccion, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.direccion, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.provincia, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.DropDownListFor(model => model.provincia, new SelectList(
                  new List<Object>{

                       new { value = "Lima" , text = "Lima" }
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })
               
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.distrito, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.DropDownListFor(model => model.distrito, new SelectList(
                  new List<Object>{

                       new { value = "Lima" , text = "Lima" },
                       new { value = "San Borja" , text = "San Borja" },
                       new { value = "Surco" , text = "Surco" }
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })
                
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.estado_afiliado, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.estado_afiliado, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.fecha_alta, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.fecha_alta, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>
        </div>

        <br />
        <h4>Generar Cuenta</h4>
        <hr />

        <div class="form-group">
            @Html.LabelFor(model => model.numero_cuenta, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.numero_cuenta, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>

            
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.puntos, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.puntos, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.tipo_cuenta, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @*@Html.EditorFor(model => model.tipo_cuenta, new { htmlAttributes = new { @class = "form-control" } })*@
                @Html.DropDownListFor(model => model.tipo_cuenta, new SelectList(
                  new List<Object>{

                       new { value = "1" , text = "Titular" },
                       new { value = "2" , text = "Adicional" }
                    },
                  "value",
                  "text",
                   2), new { @class = "form-control", @readonly = "readonly" })


               
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.cuenta_titular, htmlAttributes: new { @class = "control-label col-md-2", @id = "labelCuentaTitular" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.cuenta_titular, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>

            
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.estado, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.estado, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>

        <br />
        <h4>Asignar Tarjeta</h4>
        <hr />

        <div class="form-group">
            @Html.LabelFor(model => model.numero_cuenta, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.numero_cuenta, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
               
            </div>


        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.numero_tarjeta, htmlAttributes: new { @class = "control-label required-field col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.numero_tarjeta, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
               
               
            </div>

           
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.fecha_asignacion, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.fecha_asignacion, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
              
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.estado_tarjeta, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.estado_tarjeta, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })

               
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.motivo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-4">
                @Html.EditorFor(model => model.motivo, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                
            </div>
        </div>
@if (Model.Asociados != null)
{
    int indice = 1;

    <br />
    <h4>Asociados</h4>
        <hr />
        <br />
        <br />
        <table class="table" id="table">
            <thead>

                <tr>

                    <td>N°</td>
                    <td>DNI</td>
                    <td>Tarjeta</td>
                    <td>Cuenta</td>
                    <td>Nombres Afiliado</td>
                    <td>Tipo Cuenta</td>
                    <td>Estado Afiliado</td>
                  
                </tr>
            </thead>
            <tbody>
                

                   
                    @foreach (var item in Model.Asociados)
                    {

                        <tr id="@item.id_numero_cuenta">
                            <td>@indice</td>
                            <td>@item.numero_documento</td>
                            <td>@item.numero_tarjeta</td>
                            <td>@item.numero_cuenta</td>
                            <td>@item.nombre</td>
                            <td>@item.tipo_cuenta</td>
                            @if (item.estado_afiliado.Equals("I"))
                        {
                                <td>Inactivo</td>
                            }
                            else {
                                <td>Activo</td>
                            }


                            
                        </tr>
                        indice++;
                    }

            </tbody>

        </table>
                }

        <br />
        <div class="form-group">
            <div class="col-md-offset-5 col-md-7">
                
                <input type="button" value="Salir" class="btn btn-danger" onclick="location.href='@Url.Content("~/FichaAfiliacion/")'" />
            </div>
        </div>
    </div>
}

@*<div>
        @Html.ActionLink("Back to List", "Index")
    </div>*@
